# คู่มือการใช้งานระบบตรวจสอบฉลากวัคซีนสัตว์เลี้ยง

## ข้อมูลโปรเจค
- **ชื่อโปรเจค**: Vaccine OCR Web Application
- **วัตถุประสงค์**: ตรวจสอบและแยกข้อมูลจากฉลากวัคซีนสัตว์เลี้ยงโดยใช้เทคโนโลยี OCR
- **เทคโนโลยี**: Hybrid OCR (Tesseract + EasyOCR) พร้อม Intelligent Merge Strategy

---

## ขั้นตอนการติดตั้ง

### 1. ติดตั้ง Dependencies
```bash
cd d:\68_1_CS461_427C\vaccine_ocr_webapp
pip install -r requirements.txt
```

### 2. รันเซิร์ฟเวอร์
```bash
python app.py
```

### 3. เข้าใช้งานเว็บไซต์
- เปิดเบราว์เซอร์และเข้าที่: `http://localhost:5001`

---

## ขั้นตอนการใช้งาน

### 1. อัปโหลดรูปภาพฉลากวัคซีน
- คลิกปุ่ม **"เลือกรูปภาพ"** หรือ **ลากไฟล์มาวางในกรอบ**
- รองรับไฟล์: JPG, PNG (ขนาดสูงสุด 5MB)
- ระบบจะแสดงตัวอย่างรูปภาพที่อัปโหลด

### 2. เริ่มการตรวจสอบ
- คลิกปุ่ม **"เริ่มตรวจสอบ"**
- ระบบจะประมวลผลด้วย 3 วิธี:
  - Tesseract OCR
  - EasyOCR
  - Hybrid (ผสมผสานทั้ง 2 engine)

### 3. ดูผลลัพธ์

#### 3.1 ภาพที่ประมวลผล
- **ภาพต้นฉบับ**: ภาพที่อัปโหลด
- **ส่วนซ้าย (ประมวลผลแล้ว)**: ส่วนซ้ายของฉลากที่ผ่านการประมวลผลแล้ว
- **ส่วนขวา (ประมวลผลแล้ว)**: ส่วนขวาของฉลากที่ผ่านการประมวลผลแล้ว

#### 3.2 ผลลัพธ์การเปรียบเทียบ (3 การ์ด)
- **Tesseract OCR**: ผลที่ได้จาก Tesseract engine
- **EasyOCR**: ผลที่ได้จาก EasyOCR engine
- **ผลลัพธ์ที่แนะนำ**: ผลที่รวมจาก 2 engines โดยเลือกค่าที่ดีที่สุด

ข้อมูลในแต่ละการ์ด:
- ชื่อวัคซีน
- ชื่อการค้า
- เลขทะเบียน
- Serial Number
- วันที่ผลิต
- วันหมดอายุ

#### 3.3 ผลการเปรียบเทียบ

**คุณภาพการรวมผล (Merge Quality Score)**
- แสดงความแม่นยำของแต่ละ engine และผลรวม
- **Improvement**: แสดงว่าการรวมผลดีขึ้นเท่าไหร่

**ความแม่นยำแยกตามฟิลด์ (Field-level Accuracy)**
- แสดงความแม่นยำของแต่ละฟิลด์เป็น progress bar
- เปรียบเทียบระหว่าง Tesseract vs EasyOCR ในแต่ละฟิลด์

**การตัดสินใจเลือกข้อมูล (Merge Decision Explanation)**
- แสดงตารางเปรียบเทียบผลลัพธ์ทั้ง 3 แบบ
- แสดงว่าระบบเลือกค่าจากแหล่งใด และทำไม
- แสดงว่า 2 engines ให้ผลตรงกันหรือไม่

#### 3.4 ข้อความที่ OCR อ่านได้ (คลิกเพื่อดู)
- แสดงข้อความดิบที่ OCR อ่านได้จากแต่ละส่วน
- แบ่งเป็น 4 ส่วน:
  - Tesseract - ส่วนซ้าย
  - Tesseract - ส่วนขวา
  - EasyOCR - ส่วนซ้าย
  - EasyOCR - ส่วนขวา

---

## คุณสมบัติพิเศษ

### 1. Hybrid OCR Approach
- ผสมผสาน Tesseract และ EasyOCR เพื่อความแม่นยำสูงสุด
- เลือกผลลัพธ์ที่ดีที่สุดจากแต่ละ engine

### 2. Intelligent Error Correction
- แก้ไขข้อผิดพลาดทั่วไปของ OCR อัตโนมัติ:
  - IF → 1F
  - ZF → 2F
  - GEG → REG
  - O → 0 (ในตัวเลข)

### 3. Strict Validation
- **เลขทะเบียน**: ต้องมี slash (Number/Number)
- **Serial Number**: 5-7 ตัวเลข + 0-2 ตัวอักษร
- ป้องกันการสับสนระหว่าง Serial Number และเลขทะเบียน

### 4. Responsive Design
- รองรับการใช้งานบนมือถือและแท็บเล็ต
- ปรับขนาดหน้าจอได้อัตโนมัติ

---

## ตัวอย่างการใช้งาน

1. เตรียมรูปภาพฉลากวัคซีนสัตว์เลี้ยง (เช่น DEFENSOR 3, FELOCELL 4)
2. อัปโหลดรูปภาพผ่านเว็บไซต์
3. รอระบบประมวลผล (ประมาณ 2-5 วินาที)
4. ดูผลการเปรียบเทียบระหว่าง Tesseract, EasyOCR, และ Hybrid
5. ใช้ **"ผลลัพธ์ที่แนะนำ"** เป็นข้อมูลหลัก

---

## การแก้ไขปัญหา

### ปัญหา: รูปภาพอ่านไม่ได้
- **สาเหตุ**: รูปภาพไม่ชัดหรือมืดเกินไป
- **วิธีแก้**: ถ่ายรูปใหม่ในที่ที่มีแสงสว่างเพียงพอ

### ปัญหา: ข้อมูลไม่ครบ
- **สาเหตุ**: OCR อ่านไม่ได้บางส่วน
- **วิธีแก้**: ตรวจสอบผลจากทั้ง 3 การ์ดและเลือกผลที่ครบที่สุด

### ปัญหา: เลขทะเบียนหรือ Serial Number ผิด
- **สาเหตุ**: OCR อ่านผิด
- **วิธีแก้**: ดูที่ "ข้อความที่ OCR อ่านได้" เพื่อตรวจสอบข้อความต้นฉบับ

---

## ข้อจำกัด

- รองรับเฉพาะฉลากวัคซีนสัตว์เลี้ยงบางยี่ห้อ (DEFENSOR, FELOCELL)
- ต้องมีแสงสว่างเพียงพอในรูปภาพ
- ฉลากต้องไม่ขรุขระหรือชำรุดมากเกินไป

---

## ติดต่อ / รายงานปัญหา

หากพบปัญหาหรือต้องการปรับปรุง กรุณาติดต่อทีมพัฒนา
